version: "3.9"

services:
  playwright-bridge:
    build: .
    container_name: playwright-bridge-1

    # Browser/container stability
    init: true
    ipc: host
    shm_size: "1gb"

    environment:
      - MCPO_API_KEY=${MCPO_API_KEY}

      # Force MCP to use Firefox
      - PLAYWRIGHT_MCP_BROWSER=firefox
      - PLAYWRIGHT_MCP_HEADLESS=1
      - PLAYWRIGHT_MCP_TIMEOUT_NAVIGATION=180000
      - PLAYWRIGHT_MCP_TIMEOUT_ACTION=30000

      # Use browsers installed into /ms-playwright during build
      - PLAYWRIGHT_BROWSERS_PATH=/ms-playwright
      - PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1

    ports:
      - "8010:8000"

    networks:
      - shared-net

    restart: unless-stopped

networks:
  shared-net:
    external: true
